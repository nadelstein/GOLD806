knitr::opts_chunk$set(echo = TRUE)
knitr::include_graphics("../images/eda/sandy-hurricane.jpg")
install.packages("dplyr")
library(dplyr)
library(ggplot2)
storms
knitr::include_graphics("../images/eda/eda-dac.svg")
knitr::include_graphics("../images/eda/dplyr-extract-column.svg")
unique(pull(storms, year))
unique(select(storms, year))
knitr::include_graphics("../images/eda/dplyr-filter.svg")
storms75 <- filter(storms, year == 1975)
storms75
unique(pull(storms75, name))
distinct(storms75, name)
count(storms75, name)
knitr::include_graphics("../images/eda/dplyr-group-by.svg")
summarise(
group_by(storms75, name),
avg_wind = mean(wind),
avg_pressure = mean(pressure)
)
avg_wind_pressure_75 <- summarise(
group_by(storms75, name),
avg_wind = mean(wind),
avg_pressure = mean(pressure)
)
knitr::include_graphics("../images/eda/dplyr-arrange.svg")
arrange(avg_wind_pressure_75, avg_wind)
arrange(avg_wind_pressure_75, avg_pressure)
arrange(avg_wind_pressure_75, desc(avg_wind))
amy75 <- filter(storms75, name == "Amy")
amy75
# which are the `status` categories for Amy?
distinct(amy75, status)
# during which months was Amy active?
distinct(amy75, month)
# for how many days was Amy active?
count(distinct(amy75, day))
# summary statistics for wind
summary(select(amy75, wind))
# summary statistics for pressure
summary(select(amy75, pressure))
library(dplyr)
library(ggplot2)
# data from package "dplyr"
storms
ggplot(data = storms) +
geom_bar(aes(x = year))
nrow(filter(storms, year == 1975))
nrow(filter(storms, year == 1979))
ggplot(storms) +
geom_bar(aes(x = month), alpha = 0.5)
select(storms, year, name)
group_by(select(storms, year, name), year)
distinct(group_by(select(storms, year, name), year))
storms_year_name <- distinct(group_by(select(storms, year, name), year))
count(storms_year_name, year)
storms_per_year <- count(
distinct(
group_by(
select(storms, year, name),
year)
)
)
storms_per_year
ggplot(data = storms_year_name) +
geom_bar(aes(x = year))
arrange(storms_per_year, desc(n))
storms75 <- filter(storms, year == 1975)
storms75
ggplot(data = storms75, aes(x = wind)) +
geom_histogram()
ggplot(data = storms75, aes(x = wind)) +
geom_histogram(binwidth = 5)
ggplot(data = storms75, aes(x = wind)) +
geom_histogram(binwidth = 10)
unique(pull(storms75, name))
summary(pull(storms75, wind))
ggplot(data = storms75, aes(x = name, y = wind)) +
geom_boxplot()
ggplot(data = storms75, aes(x = wind)) +
geom_density(fill = 'gray')
ggplot(data = storms75, aes(x = wind, color = name)) +
geom_density(aes(fill = name))
ggplot(data = storms75, aes(x = wind, color = name)) +
geom_density(aes(fill = name), alpha = 0.5)
ggplot(data = storms75, aes(x = wind, color = name)) +
geom_density(aes(fill = name)) +
facet_wrap(~ name)
amy75 <- filter(storms75, name == "Amy")
amy75
ggplot(data = amy75, aes(x = 1:nrow(amy75), y = wind)) +
geom_point()
ggplot(data = amy75, aes(x = 1:nrow(amy75), y = wind)) +
geom_point() +
geom_line()
ggplot(data = amy75, aes(x = 1:nrow(amy75), y = wind)) +
geom_point(aes(color = status)) +
geom_line()
ggplot(data = amy75, aes(x = 1:nrow(amy75), y = pressure)) +
geom_point(aes(color = status)) +
geom_line()
ggplot(data = amy75, aes(x = 1:nrow(amy75), y = pressure)) +
geom_line(aes(size = wind), lineend = "round", color = 'gray70') +
geom_point(aes(size = wind, color = status))
summarise(amy75, cor(wind, pressure))
install.packages("maps")
library(dplyr)
library(ggplot2)
library(maps)
storms75 <- filter(storms, year == 1975)
ggplot(data = storms75, aes(x = long, y = lat, color = name)) +
geom_point()
# world map data
world_map <- map_data("world")
# a default world map
ggplot() +
geom_polygon(data = world_map,
aes(x = long, y = lat, group = group))
# map "canvas" stored as gg_world
gg_world <- ggplot() +
geom_polygon(data = world_map,
aes(x = long, y = lat, group = group),
fill = "gray95", colour = "gray70", size = 0.2) +
theme_bw()
gg_world
# world map, adding storms in 1975
gg_world +
geom_point(data = storms75,
aes(x = long, y = lat, color = name))
# zoom-in
gg_world +
geom_point(data = storms75,
aes(x = long, y = lat, color = name)) +
xlim(c(-150, 0)) +
ylim(c(0, 90))
gg_world +
geom_point(data = storms75,
aes(x = long, y = lat, color = name, size = wind),
alpha = 0.5) +
xlim(c(-150, 0)) +
ylim(c(0, 90))
gg_world +
geom_path(data = storms75,
aes(x = long, y = lat, color = name, size = wind),
lineend = "round", alpha = 0.4) +
xlim(c(-150, 0)) +
ylim(c(0, 90))
storms_75_80 <- filter(storms, year %in% 1975:1980)
gg_world +
geom_path(data = storms_75_80,
aes(x = long, y = lat, group = name),
lineend = "round") +
xlim(c(-150, 0)) +
ylim(c(0, 90)) +
facet_wrap(~ year)
